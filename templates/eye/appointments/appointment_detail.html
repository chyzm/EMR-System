{% extends 'base.html' %}

{% block title %}Appointment Details{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-6">
  <div class="max-w-4xl mx-auto">
    <div class="bg-white rounded-lg shadow-md overflow-hidden">
      <!-- Header -->
      <div class="bg-blue-600 px-6 py-4">
        <div class="flex justify-between items-center">
          <h1 class="text-xl font-semibold text-white">Appointment Details</h1>
          <span class="px-3 py-1 text-sm rounded-full bg-white text-blue-600">
            {{ appointment.get_status_display }}
          </span>
        </div>
      </div>
      
      <!-- Appointment Info -->
      <div class="p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
          <div>
            <h2 class="text-lg font-medium text-gray-900 mb-2">Patient Information</h2>
            <div class="bg-gray-50 p-4 rounded-lg">
              <div class="flex items-center space-x-4 mb-3">
                <div class="flex-shrink-0 h-12 w-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600">
                  <i class="fas fa-user text-xl"></i>
                </div>
                <div>
                  <p class="text-lg font-medium text-gray-900">{{ appointment.patient.full_name }}</p>
                  <p class="text-sm text-gray-500">ID: {{ appointment.patient.patient_id }}</p>
                </div>
              </div>                                                                               
              <div class="space-y-1">
                <p class="text-sm"><span class="font-medium text-gray-700">Gender:</span> {{ appointment.patient.gender }}</p>
                <p class="text-sm"><span class="font-medium text-gray-700">Age:</span> {{ appointment.patient.date_of_birth|timesince }}</p>
                <p class="text-sm"><span class="font-medium text-gray-700">Phone:</span> {{ appointment.patient.contact }}</p>
              </div>
            </div>
          </div>
          
          <div>
            <h2 class="text-lg font-medium text-gray-900 mb-2">Appointment Details</h2>
            <div class="bg-gray-50 p-4 rounded-lg">
              <div class="space-y-3">
                <div>
                  <p class="text-sm font-medium text-gray-700">Date & Time</p>
                  <p class="text-sm">{{ appointment.date }} at {{ appointment.start_time|time:"g:i A" }} - {{ appointment.end_time|time:"g:i A" }}</p>
                </div>
                <div>
                  <p class="text-sm font-medium text-gray-700">Provider</p>
                  <p class="text-sm">{{ appointment.provider.get_full_name }}</p>
                </div>
                {% comment %} <div>
                  <p class="text-sm font-medium text-gray-700">Created By</p>
                  <p class="text-sm">{{ appointment.created_by.get_full_name }}</p>
                </div> {% endcomment %}
                <div>
                  <p class="text-sm font-medium text-gray-700">Created At</p>
                  <p class="text-sm">{{ appointment.created_at }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Notes -->
        <div class="mb-6">
          <h2 class="text-lg font-medium text-gray-900 mb-2">Notes</h2>
          <div class="bg-gray-50 p-4 rounded-lg">
            {% if appointment.notes %}
              <p class="text-sm">{{ appointment.notes }}</p>
            {% else %}
              <p class="text-sm text-gray-500">No notes provided</p>
            {% endif %}
          </div>
        </div>
        
        <!-- Actions -->
        <div class="flex flex-wrap gap-3">
          <a href="{% url 'DurielEyeApp:appointment_update' appointment.pk %}" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg flex items-center">
            <i class="fas fa-edit mr-2"></i> Edit
          </a>
          {% if appointment.status != 'COMPLETED' %}
          <a href="{% url 'DurielEyeApp:mark_completed' appointment.pk %}" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center">
            <i class="fas fa-check mr-2"></i> Mark Completed
          </a>
          {% endif %}
          {% if appointment.status != 'CANCELLED' %}
          <a href="{% url 'DurielEyeApp:mark_cancelled' appointment.pk %}" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center">
            <i class="fas fa-times mr-2"></i> Cancel Appointment
          </a>
          {% endif %}
          <a href="{% url 'DurielEyeApp:appointment_list' %}" class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-4 py-2 rounded-lg flex items-center">
            <i class="fas fa-arrow-left mr-2"></i> Back to List
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}